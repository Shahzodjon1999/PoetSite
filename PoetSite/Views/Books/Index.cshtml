@model List<PoetSite.Models.Book>

@{
    ViewData["Title"] = "Books";
}

<section class="container my-5">
    <h1 class="text-center mb-5">📚 Китобҳо</h1>

    <div class="row g-4">
        @foreach (var book in Model)
        {
            <div class="col-md-4 col-sm-6">
                <div class="card h-100 shadow-sm book-card">

                    @if (!string.IsNullOrEmpty(book.CoverImage))
                    {
                        <img src="@book.CoverImage"
                             class="card-img-top"
                             style="height:320px; object-fit:cover" />
                    }
                    else
                    {
                        <div class="bg-light d-flex align-items-center justify-content-center"
                             style="height:320px">
                            <span class="text-muted">Тасвир нест</span>
                        </div>
                    }

                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">@book.Title</h5>

                        @if (!string.IsNullOrEmpty(book.Description))
                        {
                            <p class="card-text text-muted">
                                @book.Description.Substring(0,
                                    Math.Min(book.Description.Length, 100))...
                            </p>
                        }

                        <div class="mt-auto">
                            @if (!string.IsNullOrEmpty(book.PdfFile))
                            {
                                <a href="@book.PdfFile"
                                   target="_blank"
                                   class="btn btn-outline-primary w-100">
                                    📖 Хондан / Боргирӣ кардан
                                </a>
                            }
                        </div>
                        <a asp-action="Details"
                           asp-route-id="@book.Id"
                           class="btn btn-outline-primary w-100">
                            📖 Тафсилотро бинед
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
</section>
